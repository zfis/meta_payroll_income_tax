<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <record model="ir.ui.view" id="inherit_view_hr_payslip_form">
            <field name="name">hr.payslip.form</field>
            <field name="model">hr.payslip</field>
            <field name="inherit_id" ref="hr_payroll.view_hr_payslip_form"/>
            <field name="arch" type="xml">            
                <xpath expr="//sheet/group[1]/field[@name='contract_id']" position="before">
                    <field name="fiscal_year"/>
                </xpath>
                <xpath expr="//notebook" position="replace">
                    <notebook>
                        <page string="Salary Computation">
                            <field name="line_ids" colspan="4" nolabel="1">
                                <tree string="Salary Structure" editable="bottom" decoration-info="total == 0" default_order="sequence">
                                <field name="name" />
                                <field name="code" />
                                <field name="category_id" />
                                <field name="sequence" invisible="1" />
                                <field name="quantity" invisible="1" />
                                <field name="rate" />
                                <field name="salary_rule_id" />
                                <field name="amount" invisible="1" />
                                <field name="total" />
                                </tree>
                                <form string="Payslip Line">
                                <group col="4">
                                    <field name="name" />
                                    <field name="code" />
                                    <field name="category_id" />
                                    <field name="sequence" />
                                    <field name="quantity" />
                                    <field name="rate" />
                                    <field name="amount" invisible="1"/>
                                    <field name="total" />
                                    <field name="salary_rule_id" />
                                </group>
                                </form>
                            </field>
                        </page>
                        <page string="Other Inputs">
                            <field name="worked_days_line_ids" style="display: none">
                                <separator string="Worked Days" />
                                <tree string="Worked Days" editable="bottom">
                                <field name="name" />
                                <field name="code" />
                                <field name="number_of_days" sum="Total Working Days" />
                                <field name="number_of_hours" />
                                <field name="contract_id" />
                                <field name="sequence" invisible="True" />
                                </tree>
                                <form string="Worked Day">
                                <group col="4">
                                    <field name="name" />
                                    <field name="code" />
                                    <field name="sequence" />
                                    <field name="number_of_days" />
                                    <field name="number_of_hours" />
                                    <field name="contract_id" />
                                </group>
                                </form>
                            </field>
                            <field name="input_line_ids" colspan="4" nolabel="1">
                                <tree string="Input Data" editable="bottom">
                                <field name="name" />
                                <field name="code" />
                                <field name="amount" />
                                <field name="contract_id" />
                                <field name="sequence" invisible="True" />
                                </tree>
                                <form string="Payslip Line">
                                <group col="4">
                                    <field name="name" />
                                    <field name="code" />
                                    <field name="sequence" />
                                    <field name="amount" />
                                    <field name="contract_id" />
                                </group>
                                </form>
                            </field>
                        </page>
                        <page string="Income Tax Details">
                            <group>
                                <field name="income_total" />
                                <field name="hr_exemption" />
                                <field name="med_exemption" />
                                <field name="conv_exemption" />
                                <field name="exemption_total" />
                                <field name="taxable_income_total" />
                            </group>
                            <group>
                                <field name="tax_liability_total" />
                                <field name="max_allowable_investment_limit" />
                                <field name="tax_rebate_total" />
                                <field name="tax_payable_total" />
                                <field name="tax_paid_total" />
                                <field name="remain_tax_payable" />
                                <field name="remain_month" />
                                <field name="partial_month" />
                                <field name="monthly_tax_payable" />
                            </group>
                        </page>
                        <page string="Details By Salary Rule Category" invisible="1">
                            <field name="details_by_salary_rule_category" context="{'group_by':'category_id'}" domain="[('appears_on_payslip', '=', True)]">
                                <tree string="Payslip Lines" decoration-info="total == 0">
                                <field name="category_id" />
                                <field name="name" />
                                <field name="code" />
                                <field name="total" />
                                </tree>
                            </field>
                        </page>
                        <page string="Accounting Information" invisible="1">
                            <group>
                                <group string="Miscellaneous">
                                <field name="company_id" groups="base.group_multi_company" />
                                <field name="payslip_run_id" domain="[('state','=','draft')]" />
                                </group>
                                <group name="accounting" string="Accounting">
                                <field name="paid" readonly="1" />
                                </group>
                            </group>
                            <div colspan="4">
                                <field name="note" placeholder="Add an internal note..." />
                            </div>
                        </page>
                    </notebook>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="inherit_view_hr_payslip_tree">
            <field name="name">hr.payslip.form</field>
            <field name="model">hr.payslip</field>
            <field name="inherit_id" ref="hr_payroll.view_hr_payslip_tree"/>
            <field name="arch" type="xml">            
                <xpath expr="/tree/field[@name='employee_id']" position="after">
                    <field name="sf_id_2" invisible="1" />
                    <field name="work_location_type" invisible="1" />
                    <field name="sf_id" />
                    <field name="work_location_type_2" />
                </xpath>
            </field>
        </record>

        <!-- <record id="payslip_tree_view" model="ir.actions.act_window.view">
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="hr_payroll.action_view_hr_payslip_form" />
            <field name="view_id" ref="hr_payroll.view_hr_payslip_tree" />
            <field name="limit">7000</field>
        </record> -->

        <record id="hr_payroll.action_view_hr_payslip_form" model="ir.actions.act_window">
            <field name="name">Employee Payslips</field>
            <field name="res_model">hr.payslip</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="hr_payroll.view_hr_payslip_tree" />
            <field name="search_view_id" ref="hr_payroll.view_hr_payslip_filter" />
            <field name="context">{"search_default_draft":1,"search_default_done":1}</field>
            <field name="limit">10000</field>
        </record>
        
    </data>
</odoo>